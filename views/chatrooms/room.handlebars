<style>
  #output{
    border: 1px solid grey;
    width: 100%;
    height: 500px;
  }

.received_msg {
  display: inline-block;
  padding: 0 0 0 10px;
  vertical-align: top;
  width: 92%;
 }
 .received_withd_msg p {
  background: #ebebeb none repeat scroll 0 0;
  border-radius: 3px;
  color: #646464;
  font-size: 14px;
  margin: 0;
  padding: 5px 10px 5px 12px;
  width: 100%;
}
.time_date {
  color: #747474;
  display: block;
  font-size: 12px;
  margin: 8px 0 0;
}
.received_withd_msg { 
  width: 57%;
}
 .sent_msg p {
  background: #05728f none repeat scroll 0 0;
  border-radius: 3px;
  font-size: 14px;
  margin: 0; color:#fff;
  padding: 5px 10px 5px 12px;
  width:100%;
}
.outgoing_msg{ overflow:hidden; margin:26px 0 26px;}
.sent_msg {
  float: right;
  width: 46%;
}


</style>

<div class="card card-body">
  <h3>{{room.name}}</h3>
  <form onsubmit="sendMessage(message.value);return false;">
    <div class="form-group">
      <label for="roomname">chat room</label>
      <div id="output" class="mb-3">
        <div class="outgoing_msg">
          <div class="sent_msg">
            <p>Apollo University, Delhi, India Test</p>
            <span class="time_date"> 11:01 AM | Today</span>
          </div>
        </div>
        <div class="incoming_msg">
          <div class="received_msg">
            <div class="received_withd_msg">
              <p>We work directly with our designers and suppliers,
                and sell direct to you, which means quality, exclusive
                products, at a price anyone can afford.</p>
              <span class="time_date"> 11:01 AM | Today</span>
            </div>
          </div>
        </div>

      </div>
      <div class="input-group">
        <input type="text" class="form-control width100" name="message" required>
        <span class="input-group-btn">
          <button type="submit" class="btn btn-primary">Send</button>
        </span>
      </div>
    </div>

  </form>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
<script>

  const output = $("#output");

  const username = "{{user.name}}";

  const socket = io();
  socket.emit("subscribe", {
    room: "{{room.name}}",
    name: "{{user.name}}"
  });

  socket.on("messageReceive", data => {
    console.log("sender: " + data.sender);
    console.log("message: " + data.message);
  });

  function sendMessage(mes) {
    socket.emit("messageSent", { message: mes });
  }

  function addMessage() {

  }

</script>